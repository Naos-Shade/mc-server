services:
  minecraft:
    container_name: mc-server
    build: .
    restart: unless-stopped
    stdin_open: true
    tty: true
    ports:
      - "25565:25565"      # Port Java
      - "19132:19132/udp"  # Port Bedrock (Geyser)
      - "25575:25575"      # Port RCON
    volumes:
      - ./data:/server/data
      - ./backups:/server/backups
      - ./config:/server/config
    environment:
      - EULA=true
      - MIN_RAM=2G
      - MAX_RAM=4G
      - TZ=Europe/Paris
    healthcheck:
      test: ["CMD", "mc-health"]
      interval: 60s
      timeout: 10s
      retries: 3
